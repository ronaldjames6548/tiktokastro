import h from"/src/assets/js/s.js";let e,s,r,t,n,o,a,i,c,l,m,d,u,f,g,p;const v="https://download.stiktokio.com,E=\"text-[#ab0000]\",y=\"text-white\",w=\"w-full h-full object-cover rounded-lg mb-6\",x=\"text-2xl font-semibold text-white text-center mb-4\",z=\"block w-full bg-gradient-to-r from-pink-500 to-red-500 text-white font-bold py-3 px-4 rounded-lg text-center transition-all duration-300 hover:from-pink-600 hover:to-red-600 hover:shadow-lg\";async function A(){const f=document.querySelector("#tiktok-url");try{if(!navigator.clipboard)return alert("Clipboard API not supported in your browser.");const e=await navigator.clipboard.readText();e&&(f.value=e)}catch(s){alert("Failed to get clipboard text. Please check your browser's clipboard permissions.")}}function B(){s=document.querySelector("#paste-btn"),e=document.querySelector(".sub-form"),r=document.querySelector(".main-div"),t=document.querySelector(".down-div"),n=document.querySelector(".msg"),o=document.querySelector(".loader"),e.addEventListener("submit",C),s.addEventListener("click",A),D()}function E(l){a=l.layout,i=l.cards,c=l.cards_position}function F(){o.classList.contains("hidden")?(o.classList.remove("hidden"),o.classList.add("flex")):o.classList.add("flex")}function G(){o.classList.contains("flex")?(o.classList.remove("flex"),o.classList.add("hidden")):o.classList.add("hidden")}function D(){fetch(`${v}/position`).then(e=>e.json()).then(l=>E(l)).catch(e=>H(e))}function H(e){r.classList.contains("hidden")&&(r.classList.add("flex"),r.classList.remove("hidden")),n.classList.contains(y)?(n.classList.remove(y),n.classList.add(E)):(n.classList.add(E)),n.textContent=e}function I(){return a&&i&&c?h(a,c,i)||!1:(H("Please wait a few seconds."),!1)}function J(e){e.thumbnail?K(e):L(e)}function M(e){var s=document.querySelector(`.${e}`);s&&s.scrollIntoView({behavior:"smooth",block:"end"})}function N(){let e=document.querySelectorAll(".ddDiv");e.length&&(e=Array.from(e),e.forEach(s=>s.remove())),!r.classList.contains("hidden")&&(r.classList.add("hidden"),r.classList.remove("flex")),n.textContent=""}function L(b){r.classList.remove("hidden"),n.classList.add(y),b.formats.forEach(f=>{"image"===f.type?(d=document.createElement("div"),d.className="bg-gray-800 rounded-xl shadow-2xl overflow-hidden transform transition-all duration-300 w-full ddDiv",u=document.createElement("div"),g=document.createElement("a"),g.className="block w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold py-3 px-4 rounded-lg text-center transition-colors duration-300 hover:opacity-90 my-3",p=document.createElement("img"),p.className="h-auto object-cover rounded-lg mb-6 w-full max-h-[400px]",p.alt=b.title,p.src=f.imgURL,g.innerText="Download Photo",g.href=`${v}${f.link}`,g.target="_blank",d.appendChild(p),u.append(g),d.append(u),t.appendChild(d)):"audio"==f.type&&(l=document.createElement("div"),l.className=`bg-gray-800 rounded-xl shadow-2xl overflow-hidden transform transition-all duration-300 w-full ddDiv block order-2 lg:col-span-${b.formats.length - 1} md:col-span-2 col-span-1`,m=document.createElement("a"),m.className="block w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold py-3 px-4 rounded-lg text-center transition-colors duration-300 hover:opacity-90 my-3",m.innerText="Download MP3",m.href=`${v}${f.link}`,m.target="_blank",l.append(m),t.appendChild(l),d=document.createElement("button"),d.className="block w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold py-3 px-4 rounded-lg text-center transition-colors duration-300 hover:opacity-90 my-3",d.textContent="Download Another",d.addEventListener("click",()=>document.querySelector(".another").scrollIntoView({behavior:"smooth"})),l.appendChild(d)):void 0})}function K(b){let e=document.createElement("div"),s=document.createElement("div"),r=document.createElement("img");e.className="rounded-xl shadow-[0_0_3px_rgba(0,0,0,1)] overflow-hidden transform transition-all duration-300 w-full w-96 md:w-[1000px] md:flex p-4 ddDiv gap-5 col-span-2",r.className="block mb-6 md:mb-0 rounded-lg md:w-[30%] md:h-[280px]",r.alt=b.title,r.src=b.thumbnail,b.formats.forEach(f=>{let d=document.createElement("a");d.className="block w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold py-3 px-4 rounded-lg text-center transition-colors duration-300 hover:opacity-90 my-3 !text-white !no-underline",!f.hd&&!f.watermark&&"video"===f.type?(d.innerText="Download without watermark",d.href=`${v}${f.link}`,s.appendChild(d),d.target="_blank"):(f.hd&&!f.watermark&&"video"===f.type?(d.innerText="Download without watermark (HD)",d.href=`${v}${f.link}`,s.appendChild(d),d.target="_blank"):f.hd&&f.watermark&&"video"===f.type?(d.innerText="Download watermark",d.href=`${v}${f.link}`,s.appendChild(d),d.target="_blank"):!f.hd&&!f.watermark&&"audio"===f.type&&(d.innerText="Download MP3",d.href=`${v}${f.link}`,s.appendChild(d),d.target="_blank"))}),s.appendChild(function(){let e=document.createElement("button");return e.className="block w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold py-3 px-4 rounded-lg text-center transition-colors duration-300 hover:opacity-90 my-3",e.textContent="Download Another",e.addEventListener("click",()=>document.querySelector(".another").scrollIntoView({behavior:"smooth"})),e}()),e.appendChild(r),e.appendChild(s),t.appendChild(e),n.textContent=b.title,M("main-div")}let O=null;function C(b){b.preventDefault();const l=document.querySelector(".down-url").value,k=I();if(!k)return void M("main-div");N(),F(),O&&O.abort(),O=new AbortController();const a=O.signal;fetch(`${v}/download",{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":k},body:JSON.stringify({url:l}),signal:a}).then(e=>e.json()).then(s=>{s.error&&s.ex&&window.location.reload(),s.error?H(s.msg):J(s),M("main-div")}).catch(e=>"AbortError"!==e.name&&H(e)).finally(()=>G())}function P(){e&&e.removeEventListener("submit",C),s&&s.removeEventListener("click",A)}document.addEventListener("DOMContentLoaded",B),document.addEventListener("astro:before-swap",P,{once:!0}),document.addEventListener("astro:after-swap",B); 
